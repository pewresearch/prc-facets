{"version":3,"file":"template/view.js","mappings":"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","sources":["webpack://prc-facets-blocks/webpack/bootstrap","webpack://prc-facets-blocks/webpack/runtime/define property getters","webpack://prc-facets-blocks/webpack/runtime/hasOwnProperty shorthand","webpack://prc-facets-blocks/external module \"@wordpress/interactivity\"","webpack://prc-facets-blocks/./src/template/view.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","var x = (y) => {\n\tvar x = {}; __webpack_require__.d(x, y); return x\n} \nvar y = (x) => (() => (x))\nconst __WEBPACK_NAMESPACE_OBJECT__ = x({ [\"getContext\"]: () => (__WEBPACK_EXTERNAL_MODULE__wordpress_interactivity_8e89b257__.getContext), [\"getServerState\"]: () => (__WEBPACK_EXTERNAL_MODULE__wordpress_interactivity_8e89b257__.getServerState), [\"store\"]: () => (__WEBPACK_EXTERNAL_MODULE__wordpress_interactivity_8e89b257__.store), [\"withSyncEvent\"]: () => (__WEBPACK_EXTERNAL_MODULE__wordpress_interactivity_8e89b257__.withSyncEvent) });","/**\n * WordPress Dependencies\n */\nimport {\n\tstore,\n\tgetContext,\n\tgetServerState,\n\twithSyncEvent,\n\tgetElement,\n} from '@wordpress/interactivity';\n\n/**\n * Internal Dependencies\n */\n\nfunction formatCount(count) {\n\treturn 250 <= count ? '250+' : count;\n}\n\nfunction getPropertyFromObjects(property, searchValue, values) {\n\tconst choice = values.find((c) => c.value === searchValue);\n\treturn choice ? choice[property] : null;\n}\n\nconst { state, actions } = store('prc-platform/facets-context-provider', {\n\tstate: {\n\t\tget choices() {\n\t\t\tconst context = getContext();\n\t\t\tconst { facetSlug, limit, facetType } = context;\n\t\t\tif (!facetSlug) {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t\tif (!state.facets[facetSlug]) {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t\tif ('dropdown' === facetType) {\n\t\t\t\tconsole.log(\n\t\t\t\t\t'construct dropdown choices for ',\n\t\t\t\t\tfacetSlug,\n\t\t\t\t\tstate.facets[facetSlug],\n\t\t\t\t\t{\n\t\t\t\t\t\t...context,\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\treturn [...state.facets[facetSlug].choices].sort((a, b) => {\n\t\t\t\t\t// Check if both values are numbers\n\t\t\t\t\tconst aNum = Number(a.label);\n\t\t\t\t\tconst bNum = Number(b.label);\n\t\t\t\t\tif (!isNaN(aNum) && !isNaN(bNum)) {\n\t\t\t\t\t\treturn bNum - aNum; // Reversed the order\n\t\t\t\t\t}\n\t\t\t\t\t// Otherwise sort alphabetically in reverse\n\t\t\t\t\treturn b.label.localeCompare(a.label); // Reversed the order\n\t\t\t\t});\n\t\t\t}\n\t\t\tconst choices = state.facets[facetSlug].choices;\n\t\t\t// Sort choices to put selected ones first and then by count\n\t\t\tconst sortedChoices = [...choices].sort((a, b) => {\n\t\t\t\tconst aSelected = state.facets[facetSlug].selected.includes(\n\t\t\t\t\ta.value\n\t\t\t\t);\n\t\t\t\tconst bSelected = state.facets[facetSlug].selected.includes(\n\t\t\t\t\tb.value\n\t\t\t\t);\n\t\t\t\t// First sort by selection status\n\t\t\t\tif (aSelected !== bSelected) {\n\t\t\t\t\treturn bSelected - aSelected; // Selected items come first\n\t\t\t\t}\n\t\t\t\t// Then sort by count\n\t\t\t\treturn b.count - a.count;\n\t\t\t});\n\t\t\treturn sortedChoices.slice(0, limit);\n\t\t},\n\t\tget expandedChoices() {\n\t\t\tconst context = getContext();\n\t\t\tconst { facetSlug } = context;\n\t\t\tif (!state.facets[facetSlug]) {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t\tconst choices = state.facets[facetSlug].choices;\n\t\t\t// Filter out both selected choices and choices already in the main list\n\t\t\tconst filteredChoices = choices.filter((choice) => {\n\t\t\t\tconst isSelected = state.facets[facetSlug].selected.includes(\n\t\t\t\t\tchoice.value\n\t\t\t\t);\n\t\t\t\tconst isInMainList = state.choices.includes(choice);\n\t\t\t\treturn !isSelected && !isInMainList;\n\t\t\t});\n\t\t\t// Sort remaining choices by count\n\t\t\treturn filteredChoices.sort((a, b) => b.count - a.count);\n\t\t},\n\t\tget hasChoices() {\n\t\t\tconst context = getContext();\n\t\t\tconst { facetSlug } = context;\n\t\t\tconst { facets } = state;\n\t\t\treturn facets[facetSlug].choices.length > 0;\n\t\t},\n\t\tget hasSelections() {\n\t\t\tconst context = getContext();\n\t\t\tconst { facetSlug } = context;\n\t\t\tconst { facets } = state;\n\t\t\treturn facets[facetSlug].selected.length > 0;\n\t\t},\n\t\tget hasExpandedChoices() {\n\t\t\treturn state.expandedChoices && state.expandedChoices.length > 0;\n\t\t},\n\t\tget isExpanded() {\n\t\t\tconst context = getContext();\n\t\t\tconst { expanded } = context;\n\t\t\treturn expanded;\n\t\t},\n\t\t// Input Elements State:\n\t\tget isInputChecked() {\n\t\t\tconst context = getContext();\n\t\t\tconst { choice, facetSlug } = context;\n\t\t\tconst { value } = choice;\n\t\t\tconst { facets } = state;\n\t\t\treturn facets[facetSlug].selected.includes(value);\n\t\t},\n\t\tget isInputDisabled() {\n\t\t\tconst context = getContext();\n\t\t\tconst { choice } = context;\n\t\t\tconst { value, label, facetSlug } = choice;\n\t\t\tconst count = getPropertyFromObjects(\n\t\t\t\t'count',\n\t\t\t\tvalue,\n\t\t\t\tstate.facets[facetSlug].choices\n\t\t\t);\n\t\t\tif (count === 0) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\tget isInputError() {\n\t\t\treturn false;\n\t\t},\n\t\tget isInputSuccess() {\n\t\t\treturn false;\n\t\t},\n\t\tget isInputRequired() {\n\t\t\treturn false;\n\t\t},\n\t\tget isInputProcessing() {\n\t\t\treturn false;\n\t\t},\n\t\tget isInputHidden() {\n\t\t\treturn false;\n\t\t},\n\t\tget isInputReadOnly() {\n\t\t\treturn false;\n\t\t},\n\t\tget inputName() {\n\t\t\tconst context = getContext();\n\t\t\tconst { choice } = context;\n\t\t\treturn choice.slug;\n\t\t},\n\t\tget inputLabel() {\n\t\t\tconst context = getContext();\n\t\t\tconst { choice } = context;\n\t\t\tconst { value, label, facetSlug } = choice;\n\t\t\tconst count = getPropertyFromObjects(\n\t\t\t\t'count',\n\t\t\t\tvalue,\n\t\t\t\tstate.facets[facetSlug].choices\n\t\t\t);\n\t\t\treturn `${label} (${formatCount(count)})`;\n\t\t},\n\t\tget inputId() {\n\t\t\tconst context = getContext();\n\t\t\tconst { choice } = context;\n\t\t\tconst { slug, term_id } = choice;\n\t\t\treturn `facet_${slug}_${term_id}`;\n\t\t},\n\t\tget inputValue() {\n\t\t\tconst context = getContext();\n\t\t\tconst { choice } = context;\n\t\t\treturn choice.value;\n\t\t},\n\t\tget inputPlaceholder() {\n\t\t\tconst context = getContext();\n\t\t\tconst { placeholder, facetType, facetSlug } = context;\n\t\t\tlet _placeholder = `Select ${placeholder}`;\n\t\t\tif (\n\t\t\t\t'dropdown' === facetType &&\n\t\t\t\tstate.facets[facetSlug].selected.length > 0\n\t\t\t) {\n\t\t\t\t_placeholder = state.facets[facetSlug].selected[0]\n\t\t\t\t\t.replace(/-/g, ' ')\n\t\t\t\t\t.replace(/\\b\\w/g, (l) => l.toUpperCase());\n\t\t\t}\n\t\t\treturn _placeholder;\n\t\t},\n\t\tget isSelected() {\n\t\t\tconst context = getContext();\n\t\t\tconst { choice } = context;\n\t\t\tconst { tokens } = state;\n\t\t\tconst { value } = choice;\n\t\t\treturn tokens.includes(value);\n\t\t},\n\t\t/**\n\t\t * For Form-Input-Select Exclusively:\n\t\t */\n\t\tget isOpen() {\n\t\t\tconst { expanded } = getContext();\n\t\t\treturn expanded;\n\t\t},\n\t\tget inputOptions() {\n\t\t\tconst context = getContext();\n\t\t\tconst { facetSlug, facetType, searchTerm } = context;\n\t\t\tconst { choices } = getServerState().facets[facetSlug];\n\t\t\tlet newChoices = choices;\n\n\t\t\t// Filter choices based on search term.\n\t\t\tif (searchTerm && searchTerm.length > 0 && choices) {\n\t\t\t\tconst filteredChoices = choices.filter((choice) =>\n\t\t\t\t\tchoice.label\n\t\t\t\t\t\t.toLowerCase()\n\t\t\t\t\t\t.includes(searchTerm.toLowerCase())\n\t\t\t\t);\n\t\t\t\tif (filteredChoices.length > 0) {\n\t\t\t\t\tnewChoices = filteredChoices;\n\t\t\t\t} else {\n\t\t\t\t\tnewChoices = choices;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Return the choices as an array of objects with the following properties:\n\t\t\t// - value: The value of the choice.\n\t\t\t// - label: The label of the choice.\n\t\t\treturn newChoices.map((choice) => {\n\t\t\t\treturn {\n\t\t\t\t\tvalue: choice.value,\n\t\t\t\t\tlabel: `${choice.label} (${formatCount(choice.count)})`,\n\t\t\t\t};\n\t\t\t});\n\t\t},\n\t\tget hasValue() {\n\t\t\tconst context = getContext();\n\t\t\tconst { facetSlug } = context;\n\t\t\tconst { selected } = state.facets[facetSlug];\n\t\t\treturn selected.length > 0;\n\t\t},\n\t\tget hasClearIcon() {\n\t\t\treturn false;\n\t\t},\n\t\tget activeIndex() {\n\t\t\tconst context = getContext();\n\t\t\tconst { activeIndex } = context;\n\t\t\treturn activeIndex || 0;\n\t\t},\n\t},\n\tactions: {\n\t\t/**\n\t\t * When clicking on the clear button, clear the facet from the selections.\n\t\t */\n\t\tclearFacet: () => {\n\t\t\tconst { facetSlug } = getContext();\n\t\t\tactions.onClear(facetSlug);\n\t\t},\n\t\t*onInputMouseEnter() {\n\t\t\tconst context = getContext();\n\t\t\tconst { facetSlug, value, selected } = context;\n\t\t\tconst currentSelected = selected || [];\n\t\t\tconst nextSelected = { ...currentSelected, [value]: value };\n\t\t\tconst nextUrl = actions.constructNewUrl(nextSelected);\n\t\t\t// Prefetch the possible next url.\n\t\t\tyield actions.prefetch(nextUrl);\n\t\t},\n\t\tonInputMouseLeave: withSyncEvent((event) => {\n\t\t\t// console.log('onInputMouseLeave', event);\n\t\t}),\n\t\tonInputFocus: withSyncEvent((event) => {\n\t\t\tconst context = getContext();\n\t\t\tconst { facetType } = context;\n\t\t\tif ('dropdown' === facetType) {\n\t\t\t\tcontext.expanded = !context.expanded;\n\t\t\t}\n\t\t}),\n\t\tonInputBlur: withSyncEvent((event) => {\n\t\t\t// By default this runs on the on-blur directive on the input element\n\t\t\t// but we also use it as a shortcut to close the listbox on click,\n\n\t\t\t// Because the on-blur event fires before the click event\n\t\t\t// we need to slow things down a bit, 150 ms should do it...\n\t\t\tlet isRunning = false;\n\t\t\tif (!isRunning) {\n\t\t\t\tisRunning = true;\n\t\t\t\tconst context = getContext();\n\t\t\t\tconst { facetType } = context;\n\t\t\t\tif ('dropdown' === facetType) {\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tcontext.expanded = false;\n\t\t\t\t\t\tisRunning = false;\n\t\t\t\t\t}, 150);\n\t\t\t\t}\n\t\t\t}\n\t\t}),\n\t\tonInputKeyDown: withSyncEvent((event) => {\n\t\t\tevent.preventDefault();\n\t\t\tconst context = getContext();\n\t\t\tif ('dropdown' !== context.facetType) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (event.key === 'Enter') {\n\t\t\t\tconst { activeIndex, facetSlug } = context;\n\t\t\t\tconst { inputOptions, selected } = state;\n\t\t\t\tconst { value } = inputOptions[activeIndex];\n\n\t\t\t\tselected[facetSlug] = [value];\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tcontext.expanded = false;\n\t\t\t\t}, 150);\n\t\t\t}\n\t\t}),\n\t\tonInputKeyUp: withSyncEvent((event) => {\n\t\t\tconst context = getContext();\n\t\t\tconst { expanded, facetType } = context;\n\t\t\tif ('dropdown' !== facetType) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// Update the search term.\n\t\t\tcontext.searchTerm = event.target.value;\n\n\t\t\tif (!expanded) {\n\t\t\t\tcontext.expanded = true;\n\t\t\t}\n\t\t\tif (event.keyCode === 40 && event.key === 'ArrowDown') {\n\t\t\t\tactions.moveThroughChoices(1, event.target);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (event.keyCode === 38 && event.key === 'ArrowUp') {\n\t\t\t\tactions.moveThroughChoices(-1, event.target);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// if escape key, close the listbox\n\t\t\tif (event.key === 'Escape') {\n\t\t\t\tcontext.expanded = false;\n\t\t\t}\n\t\t}),\n\t\tmoveThroughChoices: (direction, ref) => {\n\t\t\tconst { inputOptions } = state;\n\t\t\tconst { activeIndex } = getContext();\n\n\t\t\t// Determine next active index.\n\t\t\tlet nextActive = null;\n\t\t\tif (activeIndex === null || isNaN(activeIndex)) {\n\t\t\t\tnextActive = 0;\n\t\t\t} else {\n\t\t\t\tnextActive = activeIndex + direction;\n\t\t\t}\n\t\t\tif (nextActive < 0) {\n\t\t\t\tnextActive = inputOptions.length - 1;\n\t\t\t}\n\t\t\tif (nextActive >= inputOptions.length) {\n\t\t\t\tnextActive = 0;\n\t\t\t}\n\n\t\t\t// Get the next active value.\n\t\t\tconst nextActiveValue = inputOptions[nextActive].value;\n\t\t\t// And then scroll the listbox to the active item.\n\t\t\tconst listbox = ref.parentElement.parentElement.querySelector(\n\t\t\t\t'.wp-block-prc-block-form-input-select__list'\n\t\t\t);\n\t\t\tconst activeItem = listbox.querySelector(\n\t\t\t\t`[data-ref-value=\"${nextActiveValue}\"]`\n\t\t\t);\n\t\t\tif (activeItem) {\n\t\t\t\t// Remove the active class from the previous active item.\n\t\t\t\tconst previousActive = listbox.querySelector('.is-selected');\n\t\t\t\tif (previousActive) {\n\t\t\t\t\tpreviousActive.classList.remove('is-selected');\n\t\t\t\t}\n\t\t\t\tactiveItem.classList.add('is-selected');\n\t\t\t\tactiveItem.scrollIntoView({\n\t\t\t\t\tblock: 'nearest',\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tgetContext().activeIndex = nextActive;\n\t\t},\n\t\tonInputOptionClick: withSyncEvent((event) => {\n\t\t\tconst context = getContext();\n\t\t\tconst { facetSlug, choice } = context;\n\t\t\tconst { selected } = state;\n\t\t\tconst { value } = choice;\n\t\t\tselected[facetSlug] = [value];\n\t\t\tconsole.log('onInputOptionClick', { ...context }, value, selected);\n\t\t}),\n\t\tonInputCheckboxClick: withSyncEvent((event) => {\n\t\t\tconst context = getContext();\n\t\t\tconst { choice, facetSlug } = context;\n\t\t\tconst { selected } = state;\n\t\t\tconst { value, type } = choice;\n\t\t\tif (state.isInputDisabled) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!selected[facetSlug] || selected[facetSlug].length === 0) {\n\t\t\t\tselected[facetSlug] = [value];\n\t\t\t} else if (selected[facetSlug].includes(value)) {\n\t\t\t\tselected[facetSlug] = selected[facetSlug].filter(\n\t\t\t\t\t(item) => item !== value\n\t\t\t\t);\n\t\t\t} else if ('radio' === type) {\n\t\t\t\tselected[facetSlug] = [value];\n\t\t\t} else {\n\t\t\t\tselected[facetSlug] = [...selected[facetSlug], value];\n\t\t\t}\n\t\t}),\n\t\t/**\n\t\t * When clicking on the facet expanded button, toggle the expanded state.\n\t\t */\n\t\tonExpand: () => {\n\t\t\tconst context = getContext();\n\t\t\tcontext.expanded = !context.expanded;\n\t\t},\n\t\tonCollapse: () => {\n\t\t\t// By default this runs on the on-blur directive on the input element\n\t\t\t// but we also use it as a shortcut to close the listbox on click,\n\t\t\t// Because the on-blur event fires before the click event\n\t\t\t// we need to slow things down a bit, 150 ms should do it...\n\t\t\tconst context = getContext();\n\t\t\tlet isRunning = false;\n\t\t\tif (!isRunning) {\n\t\t\t\tisRunning = true;\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tcontext.expanded = false;\n\t\t\t\t\tisRunning = false;\n\t\t\t\t}, 150);\n\t\t\t}\n\t\t},\n\t},\n\tcallbacks: {\n\t\t/**\n\t\t * When the facet is expanded, update the label to be either More or Less.\n\t\t */\n\t\tonExpand: () => {\n\t\t\tconst context = getContext();\n\t\t\tconst { expanded } = context;\n\t\t\tif (expanded) {\n\t\t\t\tcontext.expandedLabel = '- Less';\n\t\t\t} else {\n\t\t\t\tcontext.expandedLabel = '+ More';\n\t\t\t}\n\t\t},\n\t},\n});\n"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","y","__WEBPACK_EXTERNAL_MODULE__wordpress_interactivity_8e89b257__","x","d","formatCount","count","getPropertyFromObjects","property","searchValue","values","choice","find","c","value","state","actions","store","choices","context","getContext","facetSlug","limit","facetType","facets","console","log","sort","a","b","aNum","Number","label","bNum","isNaN","localeCompare","aSelected","selected","includes","bSelected","slice","expandedChoices","filter","isSelected","isInMainList","hasChoices","length","hasSelections","hasExpandedChoices","isExpanded","expanded","isInputChecked","isInputDisabled","isInputError","isInputSuccess","isInputRequired","isInputProcessing","isInputHidden","isInputReadOnly","inputName","slug","inputLabel","inputId","term_id","inputValue","inputPlaceholder","placeholder","_placeholder","replace","l","toUpperCase","tokens","isOpen","inputOptions","searchTerm","getServerState","newChoices","filteredChoices","toLowerCase","map","hasValue","hasClearIcon","activeIndex","clearFacet","onClear","onInputMouseEnter","nextSelected","nextUrl","constructNewUrl","prefetch","onInputMouseLeave","withSyncEvent","event","onInputFocus","onInputBlur","isRunning","setTimeout","onInputKeyDown","preventDefault","onInputKeyUp","target","keyCode","moveThroughChoices","direction","ref","nextActive","nextActiveValue","listbox","parentElement","querySelector","activeItem","previousActive","classList","remove","add","scrollIntoView","block","onInputOptionClick","onInputCheckboxClick","type","item","onExpand","onCollapse","callbacks","expandedLabel"],"sourceRoot":""}