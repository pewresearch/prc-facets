(()=>{"use strict";var e,t={60:()=>{const e=window.wp.i18n,t=window.wp.blocks,a=window.prcComponents,r=window.prcBlockUtils,o=window.wp.element,l=window.wp.blockEditor,c=window.wp.components,n=window.wp.data,i=window.ReactJSXRuntime;function s({attributes:e,setAttributes:a,context:r,clientId:s}){const{replaceInnerBlocks:p}=(0,n.useDispatch)("core/block-editor"),{facetName:u,facetLabel:d,facetType:m,facetLimit:f}=e,{facetsContextProvider:b}=r,h=(0,o.useMemo)(()=>{if(!b)return[{label:"No Facets Found",value:""}];const e=[{label:"Select a Facet",value:""}];return Object.keys(b).forEach(t=>{e.push({label:b[t].label,value:b[t].name})}),e},[b]);return(0,i.jsx)(l.InspectorControls,{children:(0,i.jsx)(c.PanelBody,{title:"Facet Template",children:(0,i.jsxs)("div",{children:[(0,i.jsx)(c.SelectControl,{label:"Facet",help:"Select a facet registered with the PRC Platform. Updating this will reset the template and any style changes.",options:h,value:u,onChange:e=>{const r=e;console.log("FACET SELECTED:",b[r]);const{type:o,label:l}=b[r];a({facetName:r,facetType:o,facetLabel:l});const c=((e,t)=>{const a={interactiveNamespace:"prc-platform/facets-context-provider"},r=`${t.replace(/_/g," ").replace(/\w\S*/g,e=>e.replace(/^\w/,e=>e.toUpperCase()))} Value`;switch(e){case"checkbox":return[["prc-block/form-input-checkbox",{type:"checkbox",label:r,interactiveSubsumption:!0,...a}]];case"dropdown":return[["prc-block/form-input-select",{placeholder:r,displayLabel:!1,metadata:{name:t},interactiveSubsumption:!0,...a}]];case"range":return[["prc-block/form-input-select",{placeholder:r,displayLabel:!1,metadata:{name:t},interactiveSubsumption:!0,...a}],["prc-block/form-input-select",{placeholder:r,displayLabel:!1,metadata:{name:t},interactiveSubsumption:!0,...a}]];case"search":return[["prc-block/form-input-text",{type:"text",label:r,interactiveSubsumption:!0,...a}]];default:return[["prc-block/form-input-checkbox",{type:"radio",label:r,interactiveSubsumption:!0,...a}]]}})(o,r);p(s,(0,t.createBlocksFromInnerBlocksTemplate)(c),!1)}}),(0,i.jsx)(c.__experimentalNumberControl,{label:"Limit",help:"Number of choices to display. Additional choices will be hidden behind a 'More' button.",value:f,onChange:e=>a({facetLimit:e})})]})})})}const p=window.prcIcons,u=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"prc-platform/facet-template","version":"2.5.0","title":"Facet Template","category":"theme","description":"Construct a facet interface using its slug, type, and label as a block. Depending on the type, the block will serve as a template for rendering repeated facet values. For instance, a checkbox facet will display a checkbox for each value, a radio facet will show a radio button for each value, and a dropdown facet will present a dropdown with the values.","attributes":{"facetName":{"type":"string","default":""},"facetType":{"type":"string","enum":["checkbox","radio","dropdown","range","search"]},"facetLabel":{"type":"string"},"facetLimit":{"type":"number","default":10},"interactiveNamespace":{"type":"string","default":"prc-platform/facets-context-provider"}},"supports":{"anchor":true,"html":false,"interactivity":true,"spacing":{"blockGap":true,"margin":["top","bottom"],"padding":true,"__experimentalDefaultControls":{"padding":true}},"__experimentalBorder":{"color":true,"width":true,"radius":true},"typography":{"fontSize":true,"lineHeight":true,"__experimentalFontFamily":true,"__experimentalFontWeight":true,"__experimentalFontStyle":true,"__experimentalTextTransform":true,"__experimentalTextDecoration":true,"__experimentalLetterSpacing":true,"__experimentalDefaultControls":{"fontSize":true,"__experimentalFontFamily":true}}},"selectors":{"root":".wp-block-prc-platform-facet-template","typography":"h5"},"usesContext":["postType","templateSlug","previewPostType","facetsContextProvider"],"providesContext":{"prc-facets/template/facetType":"facetType","prc-facets/template/facetName":"facetName","prc-facets/template/facetLabel":"facetLabel"},"styles":[{"name":"default","label":"Default","isDefault":true},{"name":"no-label","label":"No Label"}],"ancestor":["prc-platform/facets-context-provider"],"textdomain":"facet-template","editorScript":"file:./index.js","editorStyle":"file:./index.css","style":"file:./style-index.css","viewScriptModule":"file:./view.js"}'),{name:d}=u,m={icon:function(){return(0,i.jsx)(p.Icon,{icon:"filter-list"})},edit:function({attributes:t,setAttributes:c,context:n,clientId:p,isSelected:u}){const{facetName:d,facetType:m,facetLabel:f,facetLimit:b}=t,h=(0,l.useBlockProps)({className:`is-type-${m}`,style:{"--block-gap":(0,r.getBlockGapSupportValue)(t)}}),w=(0,o.useMemo)(()=>"search"===m?[{label:"Search"}]:"dropdown"===m?[{label:"Dropdown"}]:Array.from({length:b},(e,t)=>({label:`Option ${t+1}`})),[m,b]);return(0,i.jsxs)(o.Fragment,{children:[(0,i.jsx)(s,{attributes:t,setAttributes:c,context:n,clientId:p}),(0,i.jsxs)("div",{...h,children:[(0,i.jsx)(l.RichText,{tagName:"h5",placeholder:(0,e.__)("Facet Template","prc"),value:f,onChange:e=>c({facetLabel:e}),keepPlaceholderOnFocus:!0,className:"wp-block-prc-platform-facet-template__label"}),(0,i.jsx)(a.InnerBlocksAsContextTemplate,{clientId:p,allowedBlocks:["prc-block/form-input-checkbox","prc-block/form-input-select"],blockContexts:w,isResolving:!1,loadingLabel:"Loading Facet...",wrapperProps:{className:"wp-block-prc-platform-facet-template__list"}}),"dropdown"!==m&&(0,i.jsx)("button",{className:"wp-block-prc-platform-facet-template__list-expanded-button",type:"button",children:"+ More"})]})]})},save:function({attributes:e}){const{facetType:t}=e,a=l.useBlockProps.save({className:`is-type-${t}`,style:{"--block-gap":(0,r.getBlockGapSupportValue)(e)}}),o=l.useInnerBlocksProps.save();return(0,i.jsx)("div",{...a,children:o.children})}};(0,t.registerBlockType)(d,{...u,...m})}},a={};function r(e){var o=a[e];if(void 0!==o)return o.exports;var l=a[e]={exports:{}};return t[e](l,l.exports,r),l.exports}r.m=t,e=[],r.O=(t,a,o,l)=>{if(!a){var c=1/0;for(p=0;p<e.length;p++){for(var[a,o,l]=e[p],n=!0,i=0;i<a.length;i++)(!1&l||c>=l)&&Object.keys(r.O).every(e=>r.O[e](a[i]))?a.splice(i--,1):(n=!1,l<c&&(c=l));if(n){e.splice(p--,1);var s=o();void 0!==s&&(t=s)}}return t}l=l||0;for(var p=e.length;p>0&&e[p-1][2]>l;p--)e[p]=e[p-1];e[p]=[a,o,l]},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={592:0,208:0};r.O.j=t=>0===e[t];var t=(t,a)=>{var o,l,[c,n,i]=a,s=0;if(c.some(t=>0!==e[t])){for(o in n)r.o(n,o)&&(r.m[o]=n[o]);if(i)var p=i(r)}for(t&&t(a);s<c.length;s++)l=c[s],r.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return r.O(p)},a=globalThis.webpackChunk_prc_facets_blocks=globalThis.webpackChunk_prc_facets_blocks||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var o=r.O(void 0,[208],()=>r(60));o=r.O(o)})();
//# sourceMappingURL=index.js.map