import{getElement as e,getServerState as t,store as r}from"@wordpress/interactivity";var s={438:e=>{e.exports=import("@wordpress/interactivity-router")}},o={};function i(e){var t=o[e];if(void 0!==t)return t.exports;var r=o[e]={exports:{}};return s[e](r,r.exports,i),r.exports}const{addQueryArgs:n}=window.wp.url,{state:c,actions:a}=r("prc-platform/facets-context-provider",{state:{mouseEnterPreFetchTimer:500,navigateTimer:1e3,epSortByDate:!1,isProcessing:!1,get hasPosts(){return c?.pagination?.total_rows>0},get postCount(){return c?.pagination?.total_rows||0},get getServerSelected(){return t().selected},get getUpdatedUrl(){if(void 0!==c.selected)return a.constructNewUrl(c.selected)}},actions:{constructNewUrl(e=!1){const t={};if(!1===e)return;Object.keys(e).forEach(r=>{r.startsWith(c.urlKey)?t[r]=e[r]:Array.isArray(e[r])?t[`${c.urlKey}${r}`]=e[r].join(","):t[`${c.urlKey}${r}`]=e[r]}),Object.keys(t).forEach(e=>{""!==t[e]&&"object"!=typeof t[e]||delete t[e]});const r=window.location.href.split("?")[0].replace(/\/page\/\d+\//,"/");return n(r,t)},*updateResults(){const r=window.location.href,s=c.getUpdatedUrl;if(s===r)return;c.isProcessing=!0;const o=yield Promise.resolve().then(i.bind(i,438));yield o.actions.navigate(s);const n=t();c.facets=n.facets,c.tokens=n.tokens;const{ref:a}=e();a?a.scrollIntoView({behavior:"smooth",block:"start"}):window.scrollTo({top:0,behavior:"smooth"}),c.isProcessing=!1},*prefetch(e){const t=yield Promise.resolve().then(i.bind(i,438));c.prefetched.includes(e)||(c.prefetched.push(e),yield t.actions.prefetch(e))},onClear:(e,t=null)=>{const r=c.selected;return e?t?(r[e]=r[e].filter(e=>e!==t),void(c.selected={...r})):(r[e]=[],c.selected={...r},c.selected):(c.selected={},void a.updateResults())}},callbacks:{onSelection(){const e=c.selected;Object.keys(e).length<=0?c.isDisabled=!0:(a.updateResults(),c.isDisabled=!1)},onEpSortByUpdate(){c.epSortByDate?c.selected.ep_sort__by_date=!0:delete c.selected.ep_sort__by_date}}});
//# sourceMappingURL=view.js.map