import*as e from"@wordpress/interactivity";var t={438:e=>{e.exports=import("@wordpress/interactivity-router")}},o={};function r(e){var s=o[e];if(void 0!==s)return s.exports;var n=o[e]={exports:{}};return t[e](n,n.exports,r),n.exports}r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);const s=(i={getElement:()=>e.getElement,getServerState:()=>e.getServerState,store:()=>e.store},a={},r.d(a,i),a),{addQueryArgs:n}=window.wp.url,{state:c,actions:l}=(0,s.store)("prc-platform/facets-context-provider",{state:{mouseEnterPreFetchTimer:500,navigateTimer:1e3,epSortByDate:!1,isProcessing:!1,get hasPosts(){return c?.pagination?.total_rows>0},get postCount(){return c?.pagination?.total_rows||0},get getServerSelected(){return(0,s.getServerState)().selected},get getUpdatedUrl(){if(void 0!==c.selected)return l.constructNewUrl(c.selected)}},actions:{constructNewUrl(e=!1){const t={};if(!1===e)return;Object.keys(e).forEach((o=>{o.startsWith(c.urlKey)?t[o]=e[o]:Array.isArray(e[o])?t[`${c.urlKey}${o}`]=e[o].join(","):t[`${c.urlKey}${o}`]=e[o]})),Object.keys(t).forEach((e=>{""!==t[e]&&"object"!=typeof t[e]||delete t[e]}));const o=window.location.href.split("?")[0].replace(/\/page\/\d+\//,"/");return n(o,t)},*updateResults(){const e=window.location.href,t=c.getUpdatedUrl;if(t===e)return void console.log("Facets_Context_Provider -> updateResults::","no change in url");console.log("Facets_Context_Provider -> updateResults::",c,e,t),c.isProcessing=!0;const o=yield Promise.resolve().then(r.bind(r,438));yield o.actions.navigate(t),console.log("YIELD: Facets_Context_Provider <- updateResults::",(0,s.getServerState)(),e,t);const n=(0,s.getServerState)();c.facets=n.facets,c.tokens=n.tokens;const{ref:l}=(0,s.getElement)();l?l.scrollIntoView({behavior:"smooth",block:"start"}):window.scrollTo({top:0,behavior:"smooth"}),c.isProcessing=!1},*prefetch(e){const t=yield Promise.resolve().then(r.bind(r,438));c.prefetched.includes(e)||(c.prefetched.push(e),yield t.actions.prefetch(e))},onClear:(e,t=null)=>{const o=c.selected;return e?t?(o[e]=o[e].filter((e=>e!==t)),void(c.selected={...o})):(o[e]=[],c.selected={...o},c.selected):(c.selected={},void l.updateResults())}},callbacks:{onSelection(){const e=c.selected;Object.keys(e).length<=0?(console.log("Facets_Context_Provider -> onSelection:: FALSE NO SELECTIONS"),c.isDisabled=!0):(console.log("Facets_Context_Provider -> onSelection::",c),l.updateResults(),c.isDisabled=!1)},onEpSortByUpdate(){c.epSortByDate?c.selected.ep_sort__by_date=!0:delete c.selected.ep_sort__by_date}}});var i,a;
//# sourceMappingURL=view.js.map